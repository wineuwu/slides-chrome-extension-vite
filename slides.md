---
# try also 'default' to start simple
theme: default
# random image from a curated Unsplash collection by Anthony
# like them? see https://unsplash.com/collections/94734566/slidev
# background: "#FFF"
# apply any windi css classes to the current slide
class: "text-center"
# https://sli.dev/custom/highlighters.html
highlighter: shiki
# show line numbers in code blocks
lineNumbers: false
# some information about the slides, markdown enabled
info: |
  ## Slidev Starter Template
  Presentation slides for developers.

  Learn more at [Sli.dev](https://sli.dev)
# persist drawings in exports and build
colorSchema: "light"
drawings:
  persist: false
# page transition
transition: slide-left
fonts:
  sans: "Roboto"
# use UnoCSS
css: unocss
---

<div class="mx-auto w-full top-30 right-0 left-0 w-310px absolute">
<h1 class="font-bold mb-[40px] py-8 text-[#F0822A] text-2xl
"> ç”¨ <span class=" bg-[#4F74AE] text-white  py-.5 px-2 inline-block ">Vite</span> é–‹å•Ÿä½ çš„ <span class=" bg-[#4F74AE] text-white mb-6  py-.5 px-2 inline-block ">Extension</span></h1>

<p class="text-base">å¥—ä»¶ç”¨çš„å¥½ï¼Œè®“ä½ æ²’ç…©æƒ± | <s>å¥—ä»¶ï¼Œè®“ä½ èˆ‡æ˜¨å¤©èªªå†è¦‹</s> </p>
</div>
<div class="mx-auto right-0 bottom-5 left-0 w-310px absolute">
  <span class=" w-310px inline-block">
    <img src ="/winnieXweblearn.png"/>
  </span>
</div>

---

  <h2 class="font-bold text-xl mb-10 text-[#F0822A]" un-after="block content-none top-9 left-7.5 w-2 h-[40px] absolute bg-[#F0822A] mb-10"> ä»€éº¼æ˜¯ Chrome Extension ? </h2>
  <div class="flex my-8 justify-center">
    <div class="mr-2 w-[210px]" >
      <img src="/1111.png" alt="" class="mt-30px w-full"/>
    </div>
    <div class="mt-5 w-[160px]" >
      <img src="/puzzle.png" alt="" class="mt-[20px] w-full"/>
    </div>
  </div>    
  <div class="px-5 bottom-20 text-[#696969] text-[18px] leading-7 absolute">
   <span class="tracking-normal"> Chrome Extension </span>ç‚º <span class=" tracking-normal"> Chrome</span> ç€è¦½å™¨æ‰€æä¾›çš„æ“´å……å·¥å…·ï¼Œå®ƒèƒ½å¤ ä¿æŒåŸå§‹ç¶²ç«™é‹ä½œçš„ç‹€æ…‹ä¸‹ï¼Œè®“ä½¿ç”¨è€…å¯ä»¥é€éç€è¦½å™¨æ‰€æä¾›çš„æ¬Šé™ä¾†é¡å¤–è‡ªå®šç¾©é™„åŠ åŠŸèƒ½ï¼Œ<span class="font-bold text-[#F0822A]">ã€ æ”¹è®Šç‰¹å®šç¶²ç«™çš„å¤–è§€æˆ–è€…å¢åŠ æ–°çš„åŠŸèƒ½ ã€</span>ï¼Œä¸»è¦ä½¿ç”¨ <span class="font-bold tracking-normal text-[#F0822A]">ã€ HTMLã€CSSã€JavaScript ã€</span>ä¾†é–‹ç™¼ã€‚
  </div>

---

<div class="flex h-full item-center">
<h2 class="font-bold my-auto  mx-auto bg-[#F0822A] text-white text-xl text-center p-3">ä»¥ Vue DevTool ç‚ºä¾‹</h2>
</div>

---

<h3 class="font-bold text-xl mb-10 text-[#F0822A]" un-after="block content-none top-10 left-7.5 w-2 h-[25px] absolute bg-[#F0822A] mb-10">ä»¥ Vue DevTool ç‚ºä¾‹</h3>
<div class="flex h-full space-x-6 mt-10  justify-center" v-click="1">
  <div class="text-center w-[400px]">
    <img src="/ext_react.jpg" alt=""/>
  </div>
  <div class="text-center w-[400px]">
    <img src="/ext_vue.jpg" alt="" />
  </div>
</div>
<div class="text-center px-5 bottom-20 text-[#696969] text-[17px] leading-7 absolute" v-click="1">
  Vue DevTool æœƒåµæ¸¬ç•¶æ™‚ç¶²ç«™æœ‰ç„¡ä½¿ç”¨ Vue æŠ€è¡“ï¼Œå¦‚æœè©²ç¶²ç«™æœªä½¿ç”¨åˆ°Vueé–‹ç™¼ï¼Œåœ–ç¤ºå‘ˆç¾ç°è‰²ç‹€æ…‹ä¾†è¡¨ç¤º<br/>åä¹‹ï¼Œæœ‰ä½¿ç”¨åˆ°å‰‡å‘ˆç¾åŸæœ¬çš„é¡è‰²ã€‚
</div>

---

<h3 class="font-bold text-xl mb-10 text-[#F0822A]" un-after="block content-none top-10 left-7.5 w-2 h-[25px] absolute bg-[#F0822A] mb-10">ä»¥ Vue DevTool ç‚ºä¾‹</h3>
<div class="flex h-full  mt-2  justify-center" >
  <div class="w-[650px]">
    <img src="/devTool.png" alt="" />
  </div>
</div>

---

<div class="flex h-full item-center">
<h2 class="font-bold my-auto  mx-auto bg-[#F0822A] text-white text-xl text-center p-3"> çµ„æˆ èˆ‡ é‹è¡Œç’°å¢ƒ </h2>
</div>

---

<h3 class="font-bold text-xl mb-10 text-[#F0822A]" un-after="block content-none top-10 left-7.5 w-2 h-[25px] absolute bg-[#F0822A] mb-10">Chrome Extension çš„ å¸¸è¦‹çµ„æˆ </h3>

<div class="border-dashed mx-auto border-2 border-[#F9BA62] h-65%  px-5 pb-5  relative">
 <div class="mt-4 text-left mb-10px text-[#fca12a] text-22px" >
   Manifest
 </div>
 <div class="flex">      
    <div class="h-full text-[16px] w-1/2 ">
        <div class="bg-[#EDEDED] border-b border-dashed border-[#c6c6c6] h-1/3 text-center text-[#afaeae] transition-all leading-18.5 hover:border-none hover:bg-[#F0822A]  hover:text-white hover:scale-105">Action</div>
        <div class=" bg-[#EDEDED] border-dashed border-b border-[#c6c6c6] h-1/3 text-center text-[#afaeae] transition-all leading-18.5 hover:border-none hover:bg-[#F0822A] hover:text-white  hover:scale-105 ">Option</div>
        <div class=" bg-[#EDEDED] border-[#c6c6c6] h-1/3 text-center text-[#afaeae]  transition-all leading-18.5   hover:bg-[#F0822A]  hover:text-white hover:scale-105">Content Script(åŸ·è¡Œæ–¼ ç€è¦½å™¨ç«¯)</div>
    </div>
    <div class="bg-[#EDEDED] border-l border-dashed border-[#c6c6c6] h-[223px] text-white text-center text-[#afaeae] transition-all  leading-[223px] w-1/2 hover:border-none hover:bg-[#F0822A] hover:text-white  hover:scale-105" >Background (service worker)</div>
 </div> 
</div>

<div class="mt-4 text-center  px-5 text-[#696969] text-[17px] leading-7" >
åœ¨ Extension ä¸­ ä¸»è¦æ˜¯ç”±ä¸€å€‹ Manifest çµ„æˆï¼Œè€Œå…¶ä»–çš„æ¬Šé™åŠŸèƒ½ Content Script ã€ Action åŠ Option ç­‰<br/>å‰‡è¦–éœ€è¦å¯åœ¨ Manifest.json è‡ªå®šç¾©
</div>

---

<h3 class="font-bold text-xl mb-5 text-[#F0822A]" un-after="block content-none top-10 left-7.5 w-2 h-[25px] absolute bg-[#F0822A] mb-10">é‹è¡Œç’°å¢ƒ</h3>

<div class="mt-2 text-center  px-5 text-[#696969] text-[17px] leading-7" >
é‹è¡Œç’°å¢ƒå¯ä»¥åˆ†ç‚ºå…©å€‹ç‚ºå®Œå…¨ç¨ç«‹ç©ºé–“ï¼Œåˆ†åˆ¥æ˜¯ <span class="font-bold text-[#F0822A]">Extensionç«¯ åŠ ç€è¦½å™¨ç«¯</span>ã€‚å› ç‚ºæ˜¯å…©å€‹äº’ä¸å½±éŸ¿ï¼Œä¸èƒ½ç›´æ¥æ“ä½œå°æ–¹çš„ç›¸é—œæ–¹æ³•ï¼Œå”¯ä¸€æºé€šçš„æ–¹å¼åªæœ‰é€é<span class="font-bold text-[#F0822A]"> onMessage äº‹ä»¶ç›£è½æ–¹æ³•</span> ä¾†é€²è¡Œé›™æ–¹è³‡æ–™æºé€šã€‚
</div>

 <div class="mx-auto mt-15px text-left w-[600px]" >
  <img src ="/operation.png"/>
 </div>

<div class="mt-4 text-center  px-5 text-[#696969] text-[17px] leading-7" >
</div>

---

<h3 class="font-bold text-xl mb-10 text-[#F0822A]" un-after="block content-none top-10 left-7.5 w-2 h-[25px] absolute bg-[#F0822A] mb-10">é—œæ–¼ Manifest</h3>

<div class="flex  space-x-12 mt-30 w-full justify-center ">
   
  <div un-after="content-none w-40 h-40 border-3 border-[#FA9949] rounded-full absolute -left-2.8 right-0 top-0 bottom-0 m-auto" class="rounded-full bg-[#FA9949] h-34 text-center  text-[#f9f7e8] leading-34 w-34 relative  "> Manifest </div>
  <div class="rounded-full bg-[#FDE5C4] bg-[#696969] h-30 text-base  text-center opacity-60 text-[#F9BA62] leading-30 w-30" >  Background </div>
  <div class="rounded-full bg-[#FDE5C4] bg-[#696969] h-30 text-base  text-center opacity-60 text-[#F9BA62] leading-30 w-30" > Action </div>
  <div class="rounded-full bg-[#FDE5C4]  bg-[#696969] h-30 text-base  text-center opacity-60 text-[#F9BA62] leading-30 w-30" > Content Script </div>
</div>

<div class="mt-15 text-center  px-5 text-[#696969] text-[17px] leading-7" >
Manifest ç‚º å¥—ä»¶ä¸»è¦ç¨‹å¼è¨­å®šæª”ï¼Œå¦‚åŸºæœ¬åç¨±ã€ç‰ˆæœ¬ã€æè¿°ã€å„é …æ¬Šé™éƒ½åœ¨æ­¤æª”è¨­å®šï¼Œæ‰€æœ‰åŠŸèƒ½çš„åŸ·è¡Œé€²å…¥é»
</div>

---

<h3 class="font-bold text-xl mb-5 text-[#F0822A]" un-after="block content-none top-10 left-7.5 w-2 h-[25px] absolute bg-[#F0822A] mb-10">Manifest å¿…å¡«åŠå»ºè­°é …ç›®</h3>

<div class=" mb-4  text-[#696969] relative">å¿…å¡«é …ç›®</div>

```json
{
  "name": "Extension DEMO ",
  "version": "1",
  "manifest_version": 3
  //...ç•¥
}
```

<div class=" my-4  text-[#696969] relative">å»ºè­°é …ç›®</div>
```json
{
  "description": "DEMO Description",  // å»ºè­°
  "icons": {...},  // å»ºè­°
}
```

---

<h3 class="font-bold text-xl mb-2 text-[#F0822A]" un-after="block content-none top-10 left-7.5 w-2 h-[25px] absolute bg-[#F0822A] mb-10">Manifest é¸å¡«é …ç›® </h3>

<div class="space-y-2 mt-10">
<div class="font-bold   pl-6 text-[18px] text-[#696969] relative"  un-after="block content-none rounded-full left-0 w-2 h-2 absolute bg-[#696969] top-0 bottom-0 my-auto "> permissions </div>

<span class="py-4 pl-6 text-[15px] text-[#696969] inline-block">
ç•¶ Extension éœ€è¦å°ç€è¦½å™¨ é€²è¡Œé™„åŠ åŠŸèƒ½æ™‚ï¼Œæœ‰å¯èƒ½æœƒéœ€è¦ä½¿ç”¨åˆ° Browser çš„åŠŸèƒ½(åƒæ˜¯Cookieã€Storage)å”åŠ©ï¼Œæ­¤æ™‚å°±éœ€é€éåœ¨ Permission ä¸­é€²è¡Œä½¿ç”¨å®£å‘Šï¼Œæ‰èƒ½é€²è¡Œ æ¬Šé™çš„ä½¿ç”¨ã€‚
</span>

```json
{
    permissions": [
    "storage",
    "activeTab", //ç›®å‰è¦–çª—é 
    "tabs",
    "cookies" // ç¶²ç«™çš„cookie
  ],
}
```

</div>

<span class="bg-[#FDEEECCC] rounded-sm w-full p-4 text-[13px] text-[#EC5446] inline-block"> \* æé†’: å»ºè­°æ²’æœ‰ä½¿ç”¨åˆ°çš„æ¬Šé™è¨˜å¾—å°±ä¸è¦å®£å‘Šï¼Œè¦ä¸ç„¶æœƒå°è‡´æœ€å¾Œ google é€å¯© æ™‚æœƒæœªèƒ½é€šé</span>

---

<h3 class="font-bold text-xl mb-2 text-[#F0822A]" un-after="block content-none top-10 left-7.5 w-2 h-[25px] absolute bg-[#F0822A] mb-10">Manifest é¸å¡«é …ç›® </h3>

<div class="space-y-3 mt-10">
  <div class="font-bold  pl-6 text-[18px] text-[#696969] relative"  un-after="block content-none rounded-full left-0 w-2 h-2 absolute bg-[#696969] top-0 bottom-0 my-auto "> host_permissions </div>

  <span class="py-2 pl-6 text-[15px] text-[#696969] inline-block">
  ä¸»è¦ä½¿ç”¨æ™‚æ©Ÿç‚ºéœ€åœ¨ Extension ä¸­ Cross-origin è«‹æ±‚å°æ‡‰APIè³‡æ–™æ™‚ï¼Œéœ€åœ¨ host_permissions å…§å®šç¾©ç›¸é—œç¶²åŸŸçš„ç¶²å€ã€‚
  </span>

```json
{
  "host_permissions": [
    "https://www.google.com/", // æŒ‡å®šç‰¹å®šé€£çµ
    "https://www.google.com/*", // æŒ‡å®šåœ¨ç‰¹å®šç¶²åŸŸä¸‹æ‰€æœ‰é€£çµ
    "<all_urls>" //æ‰€æœ‰éƒ½å¯ä»¥ä½¿ç”¨
  ]
}
```

</div>

<span class="rounded-sm text-right w-full p-2 text-[13px] text-[#A3A3A3] inline-block"> æ›´å¤š Manifest ç›¸é—œåŠŸèƒ½è¨­å®š è«‹è¦‹ -> <a href="https://developer.chrome.com/docs/extensions/mv3/match_patterns/" >å®˜æ–¹æ–‡ä»¶</a></span>

---

<h3 class="font-bold text-xl mb-10 text-[#F0822A]" un-after="block content-none top-10 left-7.5 w-2 h-[25px] absolute bg-[#F0822A] mb-10">Chrome Extension çš„ å¸¸è¦‹çµ„æˆ Background</h3>

<div class="flex  space-x-12 mt-30 w-full justify-center ">
   
  <div class="rounded-full bg-[#FDE5C4] bg-[#696969] h-30 text-base  text-center opacity-60 text-[#F9BA62] leading-30 w-30" >  Manifest </div>
  <div un-after="content-none w-40 h-40 border-3 border-[#FA9949] rounded-full absolute -left-2.8 right-0 top-0 bottom-0 m-auto" class="rounded-full bg-[#FA9949] h-34 text-center  text-[#f9f7e8] leading-34 w-34 relative  "> Background </div>
  <div class="rounded-full bg-[#FDE5C4] bg-[#696969] h-30 text-base  text-center opacity-60 text-[#F9BA62] leading-30 w-30" > Action </div>
  <div class="rounded-full bg-[#FDE5C4]  bg-[#696969] h-30 text-base  text-center opacity-60 text-[#F9BA62] leading-30 w-30" > Content Script </div>
</div>

<div class="mt-15 text-center  px-5 text-[#696969] text-[16px] leading-7" >
Background ç‚º Extension ä¸­çš„ é•·æ™‚é–“åŸ·è¡Œè…³æœ¬äº‹ä»¶ï¼Œé€šå¸¸ Extension çš„ç›¸é—œçš„é‚è¼¯åŠŸèƒ½éƒ½æœƒæ­¤é€²è¡Œå®šç¾©ï¼Œè€Œå…¶å¸¸è¦‹çš„åŠŸèƒ½ä¸»è¦ç‚º <span class="text-[#F0822A]">ç›£è½å„é …äº‹ä»¶çš„ç™¼ç”Ÿã€ä½¿ã€ç€è¦½å™¨ç«¯ã€èˆ‡ã€ Extensionç«¯ ã€é€²è¡Œè³‡æ–™æºé€š åŠ è·¨åŸŸè«‹æ±‚APIè³‡æ–™ </span> ç­‰...
</div>

---

<h3 class="font-bold text-xl mb-10 text-[#F0822A]" un-after="block content-none top-10 left-7.5 w-1.5 h-[30px] absolute bg-[#F0822A] mb-10">Chrome Extension çš„ å¸¸è¦‹çµ„æˆ Background</h3>

<div class="space-y-3 mt-10">

<div class="mt-15  mb-5 text-[#696969] text-[16px] leading-7" >
åœ¨ Manifest 3 ä¸­ï¼Œ Background æ¡ç”¨ <span class="text-[#F0822A]">Service Worker</span> ä¾†é‹è¡Œï¼Œå¦‚æœéœ€ä½¿ç”¨ background ç›¸é—œåŠŸèƒ½ï¼Œé¦–å…ˆéœ€åœ¨ Manifest å…§ background æ¬„ä½ä¸­æŒ‡å®šæª”æ¡ˆè·¯å¾‘ï¼Œä½¿ç”¨<span class="text-[#F0822A]"> ES Module </span> åªè¦ <span class="text-[#F0822A]">type ç‚º module</span> å³å¯ä½¿ç”¨ã€‚
</div>
  
```json
// manifest.json
{
  ...
  "background": {
    "service_worker": "background.js",
    "type": "module" //optional
  }
  ...
}
```
</div>

---

<h3 class="flex  font-bold m-auto  text-white text-left text-[#FA9949] items-center"><span class=" mr-4  text-[34px] block">ğŸ§€ï¸</span> <span class="   block">ä»€éº¼æ˜¯ Service Worker ? </span></h3>

<div class="my-8  text-[17px] text-[#696969] leading-8 relative">
ç‚ºç€è¦½å™¨èˆ‡ç¶²è·¯ä¹‹é–“çš„ä¸€ç¨®ç¶²è·¯è«‹æ±‚ä»£ç†(Proxy)ï¼Œç‚ºPWAæ ¸å¿ƒæŠ€è¡“ä¹‹ä¸€ï¼Œä¸»è¦ç‰¹æ€§ç‚º <span class="text-[#FA9949]">ç„¡æ³•å­˜å–DOMå…ƒç´ </span>ï¼Œéœ€é€é <span class="text-[#FA9949]">postMessage æ–¹æ³•</span>èˆ‡å…¶ä»–æºé€š ã€ ä¸»è¦é€é<span class="text-[#FA9949]"> äº‹ä»¶ç›£è½ </span>è§¸ç™¼æ¯å€‹ç”Ÿå‘½é€±æœŸ åŠ <span class="text-[#FA9949]">éœ€åœ¨ HTTPS ä¸‹åŸ·è¡Œ</span>ï¼Œé€²è¡Œæ””æˆªè«‹æ±‚
</div>

<div class="flex mt-20  justify-center items-center">
  <div v-click='1' un-after="content-none w-40 h-40 border-3 border-[#FA9949] rounded-full absolute -left-2.8 right-0 top-0 bottom-0 m-auto" class="rounded-full bg-[#FA9949] h-34 text-center  mr-14 text-[#f9f7e8] leading-34 w-34  relative"> é›¢ç·šå¿«å–åŠŸèƒ½ </div>
  <div v-click='2' un-after="content-none w-40 h-40 border-3 border-[#FA9949] rounded-full absolute -left-2.8 right-0 top-0 bottom-0 m-auto" class="rounded-full bg-[#FA9949] h-34 text-center mr-14 text-[#f9f7e8] leading-34 w-34 relative  "> æ¨æ’­é€šçŸ¥åŠŸèƒ½ </div>
  <div v-click='3' un-after="content-none w-40 h-40 border-3 border-[#FA9949] rounded-full absolute -left-2.8 right-0 top-0 bottom-0 m-auto" class="rounded-full bg-[#FA9949] h-34 text-center  text-[#f9f7e8] leading-34 w-34 relative  "> ç¶²ç«™å®‰å…¨åŠŸèƒ½ </div>
</div>

---

<h3 class="flex  font-bold m-auto  text-white text-left text-[#FA9949] items-center"><span class=" mr-4  text-[34px] block">ğŸ§€ï¸</span> <span class="   block">Service Worker ç”Ÿå‘½é€±æœŸ  </span></h3>

<div class="mx-auto mt-10 w-[650px]">
  <img src="https://i.imgur.com/v6ouFlq.png" alt="" class="mt-[20px] w-full"/>
</div>

---

<div class="flex h-full item-center">
<h3 class="font-bold my-auto  mx-auto bg-[#FA9949] text-white text-xl text-center p-3"> é—œæ–¼ å¸¸è¦‹ äº‹ä»¶ åŠ Chrome API </h3>
</div>

---

<h3 class="font-bold text-xl mb-10 text-[#F0822A]" un-after="block content-none top-10 left-7.5 w-1.5 h-[30px] absolute bg-[#F0822A] mb-10">Background å¸¸è¦‹ç›£è½äº‹ä»¶</h3>

<div class="mt-15 mb-4   text-[16px] text-[#696969] relative"> ã€ chrome.runtime.onInstalled ã€  ç‚º Extension ç¬¬ä¸€æ¬¡è¢«å®‰è£æ™‚ï¼ŒåŸ·è¡Œäº‹ä»¶çš„è§¸ç™¼ï¼Œæ°¸é åªæœƒè§¸ç™¼ä¸€æ¬¡ </div>

```javascript
// background.js
const setStorage = (obj) => {
  chrome.storage.sync.set(obj, () => {});
};

chrome.runtime.onInstalled.addListener(async () => {
  console.log("Extension is Installed");
  //åˆå§‹åŒ–è³‡æ–™
  await setStorage({
    isClear: false,
  });
});
```

---

<h3 class="font-bold text-xl mb-10 text-[#F0822A]" un-after="block content-none top-10 left-7.5 w-1.5 h-[30px] absolute bg-[#F0822A] mb-10">Tab é ç±¤ APIåŠç›£è½äº‹ä»¶</h3>

<div class="mt-8 mb-4   text-[16px] text-[#696969] relative"> ä½¿ç”¨chrome.tabs API å¯ä»¥èˆ‡Browserçš„ç‰¹å®šé ç±¤é€²è¡Œäº’å‹•ã€‚åƒæ˜¯å‰µå»ºã€ä¿®æ”¹å’Œé‡æ–°æ’åˆ—é ç±¤é †åºç­‰...</div>

```javascript
    // å‰µå»ºæ–°Tab
    chrome.tabs.create({ url: 'page.html' });

    // å–å‡ºç›®å‰Tab
   const getCurrentTab =()=>{
   let queryOptions = { active:true,
     lastFocusedWindow: true };
      let [tab] = await chrome.tabs.query(queryOptions);
      return tab;
    }

    //å·²é–‹å•Ÿtabåˆ‡æ›æ™‚è§¸ç™¼
    chrome.tabs.onActivated.addListener((tabId, windowId) => {});

    //ç•¶tabæ›´æ–°æ™‚è§¸ç™¼
    chrome.tabs.onUpdated.addListener((id, info, tab) => {});


```

---

<h3 class="font-bold text-xl mb-10 text-[#F0822A]" un-after="block content-none top-10 left-7.5 w-1.5 h-[30px] absolute bg-[#F0822A] mb-10">Storage APIåŠç›£è½äº‹ä»¶</h3>
<div class="mt-8 mb-4   text-[16px] text-[#696969] relative"> æ­¤æ™‚Storageä¸»è¦å­˜æ–¼Extensionç«¯ï¼Œèˆ‡ localStorage ä¸»è¦å€åˆ¥ç‚º ä½¿ç”¨è€…çš„ç›¸é—œè³‡è¨Šå¯ä»¥éä½¿ç”¨storage.syncæ–¹æ³•èˆ‡Chromeè‡ªå‹•åŒæ­¥ï¼ŒåŒæ™‚åœ¨Browserç«¯ä¹Ÿå¯ä»¥å­˜å–</div>

```javascript
chrome.storage.sync.set({ key: value }, () => {});

// é€éKeyå–å‡º
chrome.storage.sync.get([key], (res) => res[key]);

//ç§»é™¤
chrome.storage.sync.remove(key, (val) => val);

//Storage æ”¹è®Šæ™‚è§¸ç™¼äº‹ä»¶
chrome.storage.onChanged.addListener((changes, areaName) => {
  console.log(changes);
});
```

---

<h3 class="font-bold text-xl mb-10 text-[#F0822A]" un-after="block content-none top-10 left-7.5 w-2 h-[25px] absolute bg-[#F0822A] mb-10">Chrome Extension çš„ å¸¸è¦‹çµ„æˆ Action</h3>

<div class="flex  space-x-12 mt-30 w-full justify-center ">
   
  <div class="rounded-full bg-[#FDE5C4] bg-[#696969] h-30 text-base  text-center opacity-60 text-[#F9BA62] leading-30 w-30" >  Manifest </div>
  <div class="rounded-full bg-[#FDE5C4] bg-[#696969] h-30 text-base  text-center opacity-60 text-[#F9BA62] leading-30 w-30" > Background </div>
  <div un-after="content-none w-40 h-40 border-3 border-[#FA9949] rounded-full absolute -left-2.8 right-0 top-0 bottom-0 m-auto" class="rounded-full bg-[#FA9949] h-34 text-center  text-[#f9f7e8] leading-34 w-34 relative  "> Action </div>
  <div class="rounded-full bg-[#FDE5C4]  bg-[#696969] h-30 text-base  text-center opacity-60 text-[#F9BA62] leading-30 w-30" > Content Script </div>
</div>

<div class="mt-15 text-center  px-5 text-[#696969] text-[17px] leading-7" >
Action ç‚º è¨­å®š Chrome Extension UIä»‹é¢çš„ç›¸é—œæ–¹æ³•ï¼Œæä¾›è¨±å¤šå®šç¾©æ–¹æ³•è®“é–‹ç™¼è€…èƒ½ä¾åŠŸèƒ½éœ€æ±‚ä¾†è‡ªå®šç¾© Extension æ¨£å¼ã€‚
</div>

---

<h3 class="font-bold text-xl mb-10 text-[#F0822A]" un-after="block content-none top-10 left-7.5 w-1.5 h-[30px] absolute bg-[#F0822A] mb-10">è‡ªå®šç¾© Popup æ¨£å¼</h3>

<div class="mt-8 mb-4   text-[16px] text-[#696969] relative">èˆ‡Backgroundç›¸åŒï¼Œè¦è‡ªå®šç¾©Extension Popupè¦–çª—ä¸€æ¨£ä¹Ÿéœ€åœ¨ Manifest.json ä¸­Actionæ¬„ä½çš„"default_popup"è¨»å†Šç›¸é—œHTMLæª”æ¡ˆè·¯å¾‘ï¼Œå¦‚æœéœ€è¦è‡ªå®šç¾© Icon ä¹Ÿéœ€è¦åœ¨ default_icon æ¬„ä½ä¸­æŒ‡å®šå°æ‡‰åœ–ç‰‡</div>

```json
  // Manifest.json
  "action": {
    "default_popup": "/popup/popup.html"
    "default_icon": {
      "16": "logo_16x16.png",
      "32": "logo_32x32.png"
    }
    ...
  },
```

---

<h3 class="font-bold text-xl text-[#F0822A]" un-after="block content-none top-10 left-7.5 w-1.5 h-[30px] absolute bg-[#F0822A] mb-4">
Action ç›¸é—œAPI
</h3>

<div class="mt-3 mb-4   text-[16px] text-[#696969] relative">ä¾ç…§ç‹€æ…‹ å‹•æ…‹åˆ‡æ› popup é é¢</div>

```javascript
// popup.js
chrome.storage.local.get("signed_in", (data) => {
  if (data.signed_in) {
    chrome.action.setPopup({ popup: "popup.html" });
  } else {
    chrome.action.setPopup({ popup: "popup_sign_in.html" });
  }
});
```

<div class="mt-3 mb-4   text-[16px] text-[#696969] relative">ä¾ç…§ç‹€æ…‹è¨­å®š popup ç‹€æ…‹æç¤º åŠ è®Šæ›´ Icon åœ–ç¤º</div>

```javascript
// popup.js
chrome.action.setBadgeText({ text: "ON" });
chrome.action.setBadgeBackgroundColor({ color: "#4688F1" });

const setIconStatus = async (iconPath) => {
  await chrome.action.setIcon({
    path: iconPath,
  });
};
```

---

<h3 class="font-bold text-xl mb-10 text-[#F0822A]" un-after="block content-none top-10 left-7.5 w-2 h-[25px] absolute bg-[#F0822A] mb-10">Chrome Extension çš„ å¸¸è¦‹çµ„æˆ Content Script</h3>

<div class="flex  space-x-12 mt-30 w-full justify-center ">
  <div class="rounded-full bg-[#FDE5C4] bg-[#696969] h-30 text-base  text-center opacity-60 text-[#F9BA62] leading-30 w-30" >  Manifest </div>
  <div class="rounded-full bg-[#FDE5C4] bg-[#696969] h-30 text-base  text-center opacity-60 text-[#F9BA62] leading-30 w-30" > Background </div>
  <div class="rounded-full bg-[#FDE5C4]  bg-[#696969] h-30 text-base  text-center opacity-60 text-[#F9BA62] leading-30 w-30" > Action </div>
  <div un-after="content-none w-40 h-40 border-3 border-[#FA9949] rounded-full absolute -left-2.8 right-0 top-0 bottom-0 m-auto" class="rounded-full bg-[#FA9949] h-34 text-center  text-[#f9f7e8] leading-34 w-34 relative  "> Content Script </div>
</div>

<div class="mt-15 text-center  px-5 text-[#696969] text-[17px] leading-7" >
  Content Script æ˜¯ Extension ä¸­å”¯ä¸€åŸ·è¡Œæ–¼<span class=" text-[#F0822A]"> ç€è¦½å™¨ç«¯</span> çš„ Context ï¼Œå¯ä»¥ç›´æ¥è¨ªå• ç¶²é ä¸­çš„è³‡è¨Š ä¸”å°DOMå…ƒç´ é€²è¡Œæ“ä½œï¼ŒåŒæ™‚åˆä¸æœƒèˆ‡é é¢æˆ– å…¶ä»–Extension çš„å…§å®¹è…³æœ¬ç™¼ç”Ÿè¡çªï¼Œå…¶ä¸­æ³¨å…¥ç¶²ç«™çš„æ–¹æ³•åˆåˆ†ç‚º<span class=" text-[#F0822A]"> ã€ éœæ…‹ Inject Script ã€ èˆ‡ ã€å‹•æ…‹ Inject Scriptã€ </span>
</div>

---

<h4 class="font-bold text-xl mb-5 text-[#F0822A]" un-after="block content-none top-10 left-7.5 w-2 h-[25px] absolute bg-[#F0822A] mb-10">ç‚ºä»€éº¼ä¸æœƒèˆ‡é é¢å…¶ä»– script ç™¼ç”Ÿè¡çªå‘¢ï¼Ÿ</h4>

  <div class="mt-10 text-center">
    <div class="w-700px inline-block">
      <img src ="/contentScript.png" class="mx-auto "/>
    </div>
  </div>
  <div class="mt-5 text-center  mb-4 text-[16px] text-[#696969] relative">å› ç‚º Content Script ä¸»è¦é‹è¡Œæ–¼ <span class=" text-[#F0822A]">Isolated Worlds</span>ï¼Œé›–ç„¶éƒ½å¯ä»¥æ“ä½œè©²é é¢ä¸Šçš„ DOMï¼Œä½†èˆ‡ ç¶²é ä¸Šçš„ Script å¯¦éš›ä¸Šæ˜¯<span class=" text-[#F0822A]">å…©å€‹ç¨ç«‹çš„åŸ·è¡Œç’°å¢ƒ</span>ï¼Œæ‰€ä»¥ä¸æœƒç›¸äº’å½±éŸ¿
  </div>

---

<h3 class="font-bold text-xl mb-10 text-[#F0822A]" un-after="block content-none top-10 left-7.5 w-2 h-[25px] absolute bg-[#F0822A] mb-10">éœæ…‹æ³¨å…¥ Script </h3>

<div class="mt-3 mb-4   text-[16px] text-[#696969] relative">éœ€åœ¨manifestæª”ä¸­content_scriptå®£å‘Šå°æ‡‰æª”æ¡ˆ(jsã€css)</div>

```json

  "content_scripts": [
    {
      "matches": ["https://*.xxx.com/*"], //æŒ‡å®šç‰¹å®šç¶²åŸŸ
      "css": ["content.css"],
      "js": ["content.js"],
      "run_at": "document_start" // æ³¨å…¥çš„æ™‚æ©Ÿ
    }
  ],
```

<span class="bg-[#FFEEDD] rounded-sm w-full p-4 text-[13px] text-[#FF8000] inline-block"> ã€run_at æ¬„ä½ã€ ç‚ºæŒ‡å®šä½•æ™‚å°‡ Cotent Script ç¨‹å¼ æ³¨å…¥æ–¼é é¢ä¸­ï¼Œåˆ†åˆ¥æœ‰ä¸‰å€‹é¸é …: document_idleã€ document_start æˆ– document_end</span>

<span class="rounded-sm text-right w-full p-2 text-[13px] text-[#A3A3A3] inline-block"> æ›´å¤š éœæ…‹ Inject ç›¸é—œåŠŸèƒ½è¨­å®š è«‹è¦‹ -> <a href="https://developer.chrome.com/docs/extensions/mv3/content_scripts/" >å®˜æ–¹æ–‡ä»¶</a></span>

---

<h3 class="font-bold text-xl mb-10 text-[#F0822A]" un-after="block content-none top-10 left-7.5 w-2 h-[25px] absolute bg-[#F0822A] mb-10">å‹•æ…‹æ³¨å…¥ Script </h3>

<div class="mt-3 mb-4   text-[16px] text-[#696969] relative">è€Œå‹•æ…‹ Inject Script å‰‡éœ€ <span class=" text-[#F0822A]">ã€ Manifest.json ã€</span> ä¸­çš„  <span class=" text-[#F0822A]">ã€ Permission ã€</span> æ¬„ä½å®£å‘Š <span class=" text-[#F0822A]">Scripting</span> æ¬Šé™</div>

```json
// manifest.json
{
  "permissions": ["scripting"]
}
```

<div class="mt-3 mb-4   text-[16px] text-[#696969] relative"> é€é<span class=" text-[#F0822A]">ã€ chrome.scripting.executeScript ã€</span> æ–¹æ³•å°‡ JavaScript æª”æ¡ˆ æ³¨å…¥ åˆ° æŒ‡å®šçš„ TabId ä¸­ã€‚</div>

```javascript
// background.js
chrome.scripting.executeScript(
    {
        target: { tabId: tab.id },
        matches: ["https://*.xxx.com/*"],
        function: injectedFunction // ä¹Ÿå¯ä»¥æŒ‡å®šæª”æ¡ˆè·¯å¾‘çš„å½¢å¼ files: ['script.js'],
        args:['HiHi', 'from Winnie']
    },
    (d) => { console.log(d) //é€™è£¡å¯ä»¥æ¥æ”¶å›å‚³åƒæ•¸ }))

```

---

<h3 class="font-bold text-xl mb-10 text-[#F0822A]" un-after="block content-none top-10 left-7.5 w-2 h-[25px] absolute bg-[#F0822A] mb-10">é—œæ–¼ Content Script çš„é™åˆ¶ </h3>

<div class="flex  space-x-12 mt-30 w-full justify-center ">
  <div un-after="content-none w-50 h-50 border-3 border-[#FFBB77] -z-1 rounded-full absolute -left-2.8 right-0 top-0 bottom-0 m-auto" class="rounded-full bg-[#FFA042]	h-48 text-center text-white text-shadow leading-48 w-48 relative " v-click="1">  ä¸æ”¯æ´ ES6 Module </div>
  <div un-after="content-none w-50 h-50 border-3 border-[#FFBB77] -z-1 rounded-full absolute -left-2.8 right-0 top-0 bottom-0 m-auto" class="rounded-full bg-[#FFA042]	h-48 text-center text-white text-shadow leading-48 w-48 relative " v-click="2"> ä¸èƒ½ä½¿ç”¨ window. æ–¹æ³• </div>
  <div un-after="content-none w-50 h-50 border-3 border-[#FFBB77] -z-1 rounded-full absolute -left-2.8 right-0 top-0 bottom-0 m-auto" class="rounded-full bg-[#FFA042]	h-48 text-center text-white text-shadow leading-48 w-48 relative " v-click="3"> ä¸èƒ½ä½¿ç”¨å…¨éƒ¨API </div>

</div>

---

<div class="flex h-full item-center">
<h2 class="font-bold my-auto  mx-auto bg-[#4F74AE] text-white text-xl text-center p-3"> å¦‚ä½•ç”¨ Vite é–‹ç™¼ </h2>
</div>

---

<h3 class="font-bold text-xl mb-5 text-[#4F74AE]" un-after="block content-none top-11 left-7.5 w-2 h-[25px] absolute bg-[#4F74AE] mb-10">ä»€éº¼æ˜¯ Vite</h3>

<div class="mt-3 mb-4   text-[16px] text-[#696969] relative">Vite æ˜¯ä¸€å€‹æ‰“åŒ…å·¥å…·ï¼Œä¸»è¦é€éåˆ©ç”¨ ç€è¦½å™¨æ”¯æ´ çš„ Native ESM ä¾†ä½œç‚ºæ ¸å¿ƒé‹ä½œï¼Œæ ¹æ“š Httpçš„request ä¾†è¼‰å…¥æ¨¡çµ„é€²è¡Œè™•ç†ï¼Œå¯¦ç¾çœŸæ­£çš„ä¾éœ€æ±‚åŠ è¼‰ï¼Œè®“é–‹ç™¼é€Ÿåº¦åŠç·¨è­¯å¯ä»¥è®Šå¾—æ›´å¿«ã€‚</div>

<div class="mt-10 text-center">
    <div class="w-500px inline-block">
      <img src ="https://i.imgur.com/KJdAe77.png" class="mx-auto "/>
    </div>
</div>

---

<div class="flex"  >
<h2 class="font-bold my-auto  mx-auto bg-[#4F74AE] text-white text-xl text-center p-3" v-click="1">å¿« ?!  æˆ‘ä¸å–œæ­¡å¤ªå¿«!!</h2>

<h2 class="font-bold my-auto  mx-auto text-xl  text-center  text-[#4F74AE]" v-click="2"> åˆ¥æ€¥~ç¤ºç¯„ä¸€æ¬¡çµ¦ä½ çœ‹çœ‹</h2>
</div>

<div class="mt-20 text-center" v-click="2">
    <div class="w-550px inline-block">
      <img src ="https://lh5.googleusercontent.com/hh6MdaF7vomJlkjFPWT4cNZK8imErvbmQXOdi3-OEKJ-D4BP7u4QwW_ncNU1CJxseN1dy4zYEnaYYxh4PHVwgxxUD71IgGXGnAcIxYr7pT6QNGU_srxnkux0sFY-mdhtbFv4TYaBCw=s0" class="mx-auto "/>
    </div>

</div>

---

<h3 class="font-bold text-xl mb-5 text-[#4F74AE]" un-after="block content-none top-11 left-7.5 w-2 h-[25px] absolute bg-[#4F74AE] mb-10">å‰µå»ºä¸€å€‹Viteå°ˆæ¡ˆ</h3>

```
 //npmï¼š
 npm create vite@latest extension-name

```

<div class="mt-3 mb-4   text-[16px] text-[#696969] relative">ä¾ç…§ Extension åŠŸèƒ½éœ€æ±‚ï¼Œåœ¨<span class="text-[#4F74AE]">ã€ src ã€</span>å…§å»ºç«‹ç›¸é—œæª”æ¡ˆï¼Œå¦‚:background ç­‰ï¼Œè€Œ manifest.json ä¸éœ€ç·¨è­¯ï¼Œæ‰€ä»¥å¯ä»¥æ”¾ç½®åœ¨ <span class="text-[#4F74AE]">ã€ public ã€</span>ä¸­ã€‚</div>

```
.
â”œâ”€â”€ popup.html //æ ¹ç›®éŒ„
â”œâ”€â”€ package.json
â”œâ”€â”€ public
â”‚   â”œâ”€â”€ logo.png
â”‚   â””â”€â”€ manifest.json
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ background.js
â”‚   â”œâ”€â”€ content_script
â”‚   â”‚   â””â”€â”€ content.js
â”‚   â””â”€â”€ popup
â”‚       â””â”€â”€ popup.js
â””â”€â”€ vite.config.js
```

---

<h3 class="font-bold text-xl mb-5 text-[#4F74AE]" un-after="block content-none top-11 left-7.5 w-2 h-[25px] absolute bg-[#4F74AE] mb-10">Vite config è¨­å®š</h3>

<div class="mt-3 mb-4   text-[16px] text-[#696969] relative">æ¥è‘—åœ¨ vite.configä¸­è¨­å®šæª”æ¡ˆæ‰“åŒ…è·¯å¾‘ï¼Œåœ¨buildä¸­é€é rollupOptions å±¬æ€§çš„inputæŒ‡å®šæª”æ¡ˆçš„è·¯å¾‘ä½ç½®ï¼Œè€Œoutputå¯ä»¥è¨­ç½®æª”æ¡ˆè¼¸å‡ºçš„åå­—ã€‚</div>

```javascript

export default defineConfig({
  ....
  build: {
    rollupOptions: {
      output: {
        entryFileNames: `[name].js`,
        chunkFileNames: `[name].js`,
        assetFileNames: `[name].[ext]`,
      },
      input: {
        popup: resolve(__dirname, 'popup.html'),
        background: resolve(__dirname, '/src/background.js'),
        content: resolve(__dirname, 'content.html')
      }
    }
  },
  ...
})

```

---

<div class="flex h-full items-center">
<h2 class="font-bold my-auto  mx-auto bg-[#4F74AE] text-white text-xl text-center p-3"> 
Content Script èˆ‡ ES Moduleçš„å‘ !! </h2>
</div>

---

<h3 class="font-bold text-xl mb-10 text-[#4F74AE]" un-after="block content-none top-10 left-7.5 w-2 h-[25px] absolute bg-[#4F74AE] mb-10">é—œæ–¼ Content Script èˆ‡ ES Module çš„ å‘ </h3>

<div class="flex  space-x-15 mt-30 w-full justify-center">
  <div class="rounded-full bg-[#4F74AE] h-60	text-base text-center text-white text-shadow leading-60 w-60 relative " v-click="1">  ä½¿ç”¨ iframe </div>
  <div class="rounded-full bg-[#4F74AE] h-60	text-base text-center text-white text-shadow leading-60 w-60 relative " v-click="1"> Scripting+ Web Accessible Resources </div>
</div>

---

<div class="flex h-full items-center">
<h2 class="font-bold my-auto  mx-auto bg-[#4F74AE] text-white text-xl text-center p-3"> 
æ„Ÿè¬å¤§å®¶!!</h2>
</div>
